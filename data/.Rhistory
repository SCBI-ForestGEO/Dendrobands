yr_intra <- yr[yr$intraannual==1, ]
for (j in seq(along=years)){
tent <- paste0(years[[j]], sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
View(all_years)
View(all_trees)
?split
for (k in seq(along=dirs)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
for (j in seq(along=years)){
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
for (h in 1:length(tent)){
assign(unique(tent[[h]]$tag), tent[[h]]) }
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
for (h in 1:length(tent)){
assign(unique(tent[[h]]$tag), tent[[h]])
}
View(tent)
for (k in seq(along=dirs)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
for (j in seq(along=years)){
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
View(all_years)
names(all_years) <- years
View(all_years)
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
names(all_years) <- years
View(all_trees)
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_trees <- list()
all_years <- list()
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
names(all_years) <- years
View(all_trees)
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
#all_trees[[j]] <- tent
}
all_years[[k]] <- tent
}
names(all_years) <- years
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- tent
}
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_trees <- list()
all_years <- list()
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- tent
}
names(all_years) <- years
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_trees <- list()
all_years <- list()
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- tent
}
names(all_years) <- years
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_trees <- list()
all_years <- list()
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- tent
}
names(all_years) <- years
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
View(all_trees)
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent[[k]] <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
yr <- read.csv(dirs[[k]])
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent[[i]] <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent[[file]] <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
View(all_years)
for (k in seq(along=dirs)){
for (j in seq(along=years)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
#all_trees[[j]] <- tent
}
all_years[[k]] <- tent[[j]]
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
#all_trees[[j]] <- tent
}
all_years[[k]] <- tent[[k]]
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent[[k]] <- split(yr_intra, yr_intra$stemID)
}
#all_trees[[j]] <- tent
}
all_years[[k]] <- tent
}
for (k in seq(along=dirs)){
for (j in seq(along=years)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent <- paste0(years[[j]], sep="_", "trees")
if(k==j){
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
}
all_trees[[j]] <- tent
}
all_years[[k]] <- all_trees
}
tent <- paste0(years sep="_", "trees")
tent <- paste0(years, sep="_", "trees")
for (k in seq(along=dirs)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent_name <- paste0(years, sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_years[[k]] <- tent
}
View(all_years)
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_trees <- list()
all_years <- list()
for (k in seq(along=dirs)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent_name <- paste0(years, sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_years[[k]] <- tent
}
View(all_years)
names(all_years) <- years
View(all_years)
names(all_years) <- tent_name
View(all_years)
rm(all_trees)
View(all_years)
k=7
yr <- read.csv(file)
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
length(unique(yr_intra$stemID))
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
for (k in seq(along=dirs)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent_name <- paste0(years, sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_years[[k]] <- tent
}
names(all_years) <- tent_name
View(all_years)
multistem <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/resources/data_entry_forms/multistem_trees_stem-treeID.csv")
View(multistem)
dendro_trees <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/dendro_trees.csv")
View(dendro_trees)
dendro2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/scbi.dendroAll_2018.csv")
View(dendro2018)
dendro_trees$location <- dendro2018$location[match(dendro_trees$tag, dendro2018$tag)]
View(dendro_trees)
dendro_trees <- dendro_trees[c(1:13,22,14:21), ]
dendro2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/scbi.dendroAll_2018.csv")
dendro_trees$location <- dendro2018$location[match(dendro_trees$tag, dendro2018$tag)]
dendro_trees <- dendro_trees[ ,c(1:13,22,14:21)]
dendro2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/scbi.dendroAll_2018.csv")
dendro_trees <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/dendro_trees.csv")
dendro2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/scbi.dendroAll_2018.csv")
dendro_trees$location <- dendro2018$location[match(dendro_trees$tag, dendro2018$tag)]
dendro_trees <- dendro_trees[ ,c(1:13,22,14:21)]
View(dendro_trees)
getwd()
write.csv(dendro_trees, "dendro_trees.csv", row.names=FALSE)
#1 Create field_form intraannual ####
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/protocols_field-resources/field_forms")
#1 Create field_form intraannual ####
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/resources/field_forms")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/scbi.dendroAll_2018.csv")
dendro_trees <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/dendro_trees.csv")
prevmeasin <- subset(data_2018,survey.ID=="2018.01" & intraannual=="1") #subset by previous survey.ID. Change "2018.01" to be the most recent survey.ID when printing a new field form (to have updated previous measurement)
data_intra <- subset(data_2018,survey.ID=="2018.01" & intraannual=="1") #subset by 2018.01 (one entry per stem)
data_intra<-data_intra[ ,c("tag", "stemtag", "sp", "quadrat", "lx", "ly", "measure", "codes", "dbh")]
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/scbi.dendroAll_2018.csv")
dendro_trees <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/dendro_trees.csv")
prevmeasin <- subset(data_2018,survey.ID=="2018.01" & intraannual=="1") #subset by previous survey.ID. Change "2018.01" to be the most recent survey.ID when printing a new field form (to have updated previous measurement)
data_intra <- subset(data_2018,survey.ID=="2018.01" & intraannual=="1") #subset by 2018.01 (one entry per stem)
data_intra$location <- dendro_trees$location[match(data_intra$stemID, dendro_trees$stemID)]
View(data_intra)
data_intra<-data_intra[ ,c("tag", "stemtag", "sp", "quadrat", "lx", "ly", "measure", "codes", "location", "dbh")]
data_intra$measure = NA
data_intra$codes = NA
data_intra$"Date2: SvID: Name:" = NA
data_intra$"Date3: SvID: Name:" = NA
data_intra$"Date4: SvID: Name:" = NA
data_intra$"Date5: SvID: Name:" = NA
library(dplyr)
data_intra<-data_intra %>% rename("Date1:  SvID:   Name:" = measure, "codes&notes" = codes, "stem" = stemtag)
data_intra$prevmeas = prevmeasin$measure
data_intra[is.na(data_intra)&!is.na(data_intra$prevmeas)] <- " "
data_intra<-data_intra[,c(1:3,10,4:6,15,7,11:14,8:9)]
View(data_intra)
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_years <- list()
for (k in seq(along=dirs)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent_name <- paste0(years, sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_years[[k]] <- tent
}
names(all_years) <- tent_name
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data")
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_years <- list()
for (k in seq(along=dirs)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent_name <- paste0(years, sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_years[[k]] <- tent
}
names(all_years) <- tent_name
View(all_years)
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data")
dirs <- dir("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data", pattern="_201[1-8]*.csv")
years <- c(2011:2018)
all_years <- list()
for (k in seq(along=dirs)){
file <- dirs[[k]]
yr <- read.csv(file)
yr_intra <- yr[yr$intraannual==1, ]
tent_name <- paste0(years, sep="_", "trees")
#years[[j]] <- ifelse(dirs[[k]]=="scbi.dendroAll_2010.csv",
#split(yr, yr$stemID),
#split(yr_intra, yr_intra$stemID))
tent <- split(yr_intra, yr_intra$stemID)
all_years[[k]] <- tent
}
names(all_years) <- tent_name
View(all_years)
