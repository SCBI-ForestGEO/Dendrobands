hist(x)
hist(y, add=T)
x <- data_dbh$dbh
y <- data_dbh$sp
hist(x)
hist(y, add=T)
as.numeric(x)
hist(x)
hist(y, add=T)
hist(y)
hist(data_dbh$sp)
library(ggplot2)
ggplot(data_dbh, aes(x=dbh, y=sp)
)
ggplot(data_dbh, aes(x=dbh, y=sp))
ggplot(data_dbh, aes(dbh,fill=sp),geom_bar(position="stack")
ggplot(data_dbh, aes(dbh,fill=sp),geom_bar(position="stack"))
library(esquisse)
esquisse:::esquisser()
library(ggplot2)
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 20) +
labs(title = "Dendroband dbh and species by frequency") +
theme_minimal()
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 20) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
View(dendro_trees_dbhcount2018)
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp)+
geom_histogram(bins=16)+
labs(title = Dendroband sp numbers)+
theme_minimal()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp)+
geom_histogram(bins=16)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,stat+"count")+
geom_histogram(bins=16)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
esquisse::esquisser
esquisse:::esquisser()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,y=biannual.n)+
geom_histogram(bins=16)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,y=biannual.n)+
geom_histogram()+
labs(title = "Dendroband sp numbers")+
theme_minimal()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,y=biannual.n)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
esquisse:::esquisser()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,weight=biannual.n)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,weight=biannual.n)+
geom_bar=()
esquisse:::esquisser()
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")
range(scbi.stem2$dbh)
ANPP_total_and_by_species <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
View(ANPP_total_and_by_species)
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(ggplot2)
## plot ANPP contribution by dendroband sp numbers
setnames(ANPP, old="species", new="sp")
ANPPmerge <- data.frame(ANPP$sp, ANPP$ANPP_Mg.C.ha1.y1_10cm)
View(ANPPmerge)
View(dendro)
ANPPmerge$biannual.n <- dendro$biannual.n[match(ANPPmerge$sp, dendro$sp)]
View(ANPPmerge)
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
View(ANPPmerge)
## plot ANPP contribution (>10cm) by dendroband sp numbers
setnames(ANPP, old="species", new="sp")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(ggplot2)
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro_trees_dbhcount2018) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
setnames(ANPP, old="species", new="sp")
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")
View(ANPP)
ANPPmerge <- data.frame(ANPP$sp, ANPP$ANPP_Mg.C.ha1.y1_10cm)
ANPPmerge$biannual.n <- dendro$biannual.n[match(ANPPmerge$sp, dendro$sp)]
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
View(ANPPmerge)
ANPPmerge <- c(ANPP$sp, ANPP$ANPP_Mg.C.ha1.y1_10cm)
?data.frame
ANPPmerge <- as.data.frame(ANPP$sp, ANPP$ANPP_Mg.C.ha1.y1_10cm)
ANPPmerge <- data.frame(ANPP$sp, ANPP$ANPP_Mg.C.ha1.y1_10cm)
View(ANPPmerge)
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
View(ANPP)
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
View(ANPPmerge)
setnames(ANPP, old="ANPP.species", new="sp")
setnames(ANPPmerge, old="ANPP.species", new="sp")
View(ANPPmerge)
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
View(ANPPmerge)
ggplot(data = ANPPmerge) +
aes(x = sp, y=biannual.n, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
esquisse::esquisser
esquisse:::esquisser()
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
theme_minimal()
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
esquisse:::esquisser()
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(ggplot2)
pdf(file="Dendroband_sp_dbh_ANPP.pdf")
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
setnames(ANPPmerge, old="ANPP.species", new="sp")
ANPPmerge$biannual.n <- dendro$biannual.n[match(ANPPmerge$sp, dendro$sp)]
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
theme_minimal()
dev.off()
getwd()
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(data.table)
library(ggplot2)
pdf(file="Dendroband_sp_dbh_ANPP.pdf")
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
setnames(ANPPmerge, old="ANPP.species", new="sp")
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
theme_minimal()
dev.off()
?pdf
#Simple plots for dendroband dbh
## these were made to help determine what trees to add to replace dead ones
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(data.table)
library(ggplot2)
pdf(file="Dendroband_sp_dbh_ANPP.pdf", width=12)
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
setnames(ANPPmerge, old="ANPP.species", new="sp")
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
theme_minimal()
dev.off()
#Simple plots for dendroband dbh
## these were made to help determine what trees to add to replace dead ones
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(data.table)
library(ggplot2)
pdf(file="Dendroband_sp_dbh_ANPP.pdf", width=12)
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")+
scale_x_discrete(limits=top$sp)
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
setnames(ANPPmerge, old="ANPP.species", new="sp")
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
theme_minimal()
dev.off()
#Simple plots for dendroband dbh
## these were made to help determine what trees to add to replace dead ones
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(data.table)
library(ggplot2)
pdf(file="Dendroband_sp_dbh_ANPP.pdf", width=12)
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")+
scale_x_discrete(limits=top$sp)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
setnames(ANPPmerge, old="ANPP.species", new="sp")
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
theme_minimal()
dev.off()
?scale_x_discrete
#Simple plots for dendroband dbh
## these were made to help determine what trees to add to replace dead ones
setwd("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results")
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
dendro <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/results/dendro_trees_dbhcount2018.csv")
ANPP <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data/summary_data/ANPP_total_and_by_species.csv")
data_dbh<-data_2018[which(data_2018$survey.ID=='2018.14'), ]
library(data.table)
library(ggplot2)
pdf(file="Dendroband_sp_dbh_ANPP.pdf", width=12)
## basic distribution of dbh size classes
hist(data_dbh$dbh,
main="Histogram of Dendroband DBH 2018",
xlab="DBH (mm)",
border="blue",
col="grey",
las=1,
breaks=15)
## plot number of dbh size occurrences with species fill-in
ggplot(data = data_dbh) +
aes(x = dbh, fill = sp) +
geom_histogram(bins = 16) +
labs(title = "Dendroband dbh and species by frequency 2018") +
theme_minimal()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")+
scale_x_discrete(limits=dendro$sp)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
## plot ANPP contribution (>10cm) by dendroband sp numbers
ANPPmerge <- data.frame(ANPP$species, ANPP$ANPP_Mg.C.ha1.y1_10cm)
setnames(ANPPmerge, old="ANPP.species", new="sp")
ANPPmerge <- merge(ANPPmerge,dendro, by="sp")
ggplot(data = ANPPmerge) +
aes(x = sp, fill = ANPP.ANPP_Mg.C.ha1.y1_10cm, weight = biannual.n) +
geom_bar() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Dendroband sp numbers by ANPP >10cm 2018")
theme_minimal()
dev.off()
## plot number of trees by species
ggplot(data=dendro) +
aes(x=sp,weight=biannual.n)+
geom_bar(fill="blue")+
scale_x_discrete(limits=dendro$sp)+
labs(title = "Dendroband sp numbers")+
theme_minimal()
getwd()
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
#subset by the last survey from the year
data_surveys<- subset(data_2018,data_2018$survey.ID=='2018.14' & data_2018$status=='alive') #get rid of '0' values for minimum
data_trees <- data_2018[!duplicated(data_2018["sp"]),]
data_trees <- data_trees[c("sp")] #list that shows all sp alive and dead
#make data.frames with the dbhmax,min,mean by sp
dbhmax <- aggregate(data_surveys$dbh, by=list(data_surveys$sp), max)
dbhmin <- aggregate(data_surveys$dbh, by=list(data_surveys$sp), min)
dbhavg <- aggregate(data_surveys$dbh, by=list(data_surveys$sp), mean)
names(dbhmax) <- c("sp", "dbhmax.mm")
names(dbhmin) <- c("sp", "dbhmin.mm")
names(dbhavg) <- c("sp", "dbhavg.mm")
is.num <- sapply(dbhavg,is.numeric)
dbhavg[is.num] <- lapply(dbhavg[is.num], round, 1)
#create data.frame with count of sp per survey
library(data.table)
data_01<-subset(data_2018,data_2018$survey.ID=='2018.01') #get all sp
countbi<- addmargins(table(data_01$sp, data_01$biannual),1)
countbi<- as.data.frame.matrix(countbi)
setDT(countbi, keep.rownames=TRUE)[]
colnames(countbi) <- c("sp", "biannual.n")
countintra<- addmargins(table(data_01$sp, data_01$intraannual==1), 1)
countintra<- as.data.frame.matrix(countintra)
setDT(countintra, keep.rownames=TRUE)[]
colnames(countintra) <- c("sp", "wrong", "intraannual.n")
countintra$wrong <- NULL
#merge the data.frames together
library(tidyverse)
#have to make two separate dataframes, then merge them together to make sure the "Sum" row is kept
data_count <- merge(countbi, countintra, by="sp")
data_num <- list(data_trees,dbhmin,dbhmax,dbhavg) %>% reduce(left_join, by="sp")
data_merged <- merge(data_count, data_num, by="sp", all.x=TRUE)
data_merged <- data_merged[order(data_merged$sp),]
##reorder to make "Sum" row be last. These numbers may change depending on if a tree has been fully removed from the survey
data_merged <- data_merged[c(1:19,21,22,20),]
write.csv(data_merged, "dendro_trees_dbhcount2018.csv", row.names=FALSE)
data_2018 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/Dendrobands/data/2018/scbi.dendroAll_2018.csv")
#subset by the last survey from the year
data_surveys<- subset(data_2018,data_2018$survey.ID=='2018.14' & data_2018$status=='alive') #get rid of '0' values for minimum
data_trees <- data_2018[!duplicated(data_2018["sp"]),]
data_trees <- data_trees[c("sp")] #list that shows all sp alive and dead
#make data.frames with the dbhmax,min,mean by sp
dbhmax <- aggregate(data_surveys$dbh, by=list(data_surveys$sp), max)
dbhmin <- aggregate(data_surveys$dbh, by=list(data_surveys$sp), min)
dbhavg <- aggregate(data_surveys$dbh, by=list(data_surveys$sp), mean)
names(dbhmax) <- c("sp", "dbhmax.mm")
names(dbhmin) <- c("sp", "dbhmin.mm")
names(dbhavg) <- c("sp", "dbhavg.mm")
is.num <- sapply(dbhavg,is.numeric)
dbhavg[is.num] <- lapply(dbhavg[is.num], round, 1)
#create data.frame with count of sp per survey
library(data.table)
data_01<-subset(data_2018,data_2018$survey.ID=='2018.01') #get all sp
countbi<- addmargins(table(data_01$sp, data_01$biannual),1)
countbi<- as.data.frame.matrix(countbi)
setDT(countbi, keep.rownames=TRUE)[]
colnames(countbi) <- c("sp", "biannual.n")
countintra<- addmargins(table(data_01$sp, data_01$intraannual==1), 1)
countintra<- as.data.frame.matrix(countintra)
setDT(countintra, keep.rownames=TRUE)[]
colnames(countintra) <- c("sp", "wrong", "intraannual.n")
countintra$wrong <- NULL
#merge the data.frames together
library(tidyverse)
#have to make two separate dataframes, then merge them together to make sure the "Sum" row is kept
data_count <- merge(countbi, countintra, by="sp")
data_num <- list(data_trees,dbhmin,dbhmax,dbhavg) %>% reduce(left_join, by="sp")
data_merged <- merge(data_count, data_num, by="sp", all.x=TRUE)
data_merged <- data_merged[order(data_merged$sp),]
##reorder to make "Sum" row be last. These numbers may change depending on if a tree has been fully removed from the survey
data_merged <- data_merged[c(1:19,21,22,20),]
write.csv(data_merged, "dendro_trees_dbhcount2018.csv", row.names=FALSE)
mort18 <- read.csv("C:/Users/mcgregori/Dropbox (Smithsonian)/Github_Ian/SCBI-ForestGEO-Data_private/SCBI_mortality/data/mortality_2018.csv")
View(mort18)
mortcanopy <- subset(mort18, mort18$crown.position==c("A","CD","CR","D","I","OG","S")
mortcanopy <- subset(mort18, mort18$crown.position==c("A","CD","CR","D","I","OG","S"))
View(mortcanopy)
mortcanopy <- mortcanopy[,c("tag","stemtag","stemID","sp","dbh.2013","status.2018","dbh.if.dead","perc.crown","crown.position")]
mortcanopy <- mortcanopy[ ,c("tag","stemtag","stemID","sp","dbh.2013","status.2018","dbh.if.dead","perc.crown","crown.position")]
View(mortcanopy)
setnames(mortcanopy, old="StemTag", new="stemtag")
library(data.table)
setnames(mortcanopy, old="StemTag", new="stemtag")
mortcanopy <- mortcanopy[ ,c("tag","stemtag","stemID","sp","dbh.2013","status.2018","dbh.if.dead","perc.crown","crown.position")]
View(mortcanopy)
